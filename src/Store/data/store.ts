import { createSlice } from '@reduxjs/toolkit';
import { DATA_SLICE_NAME } from './constants';
import {
	createMaterialReducer,
	createQuestionReducer,
	createThemeReducer,
	deleteMaterialReducer,
	deleteQuestionReducer,
	deleteThemeReducer,
	editMaterialReducer,
	editQuestionReducer,
	editStudyQuestionReducer,
	editThemeReducer,
	readMaterialReducer,
	reorderMaterialsReducer,
	reorderQuestionsReducer,
	reorderThemesReducer,
	setIsCreateThemeActiveReducer,
	setMaterialToDeleteReducer,
	setMaterialToEditReducer,
	setQuestionToDeleteReducer,
	setQuestionToEditReducer,
	setThemeToCreateMaterialReducer,
	setThemeToCreateQuestionReducer,
	setThemeToDeleteReducer,
	setThemeToEditReducer,
	studyQuestionReducer,
} from './reducers';
import {
	IDataSlice,
	IDataSliceName,
	IDataSliceReducers,
	IDataSliceSelectors,
} from './types';
import {
	getMaterialSelector,
	getQuestionExtendedSelector,
	getQuestionSelector,
	getStatisticsSelector,
	getThemeExtendedSelector,
	getThemeSelector,
	materialsSelector,
	questionsSelector,
	themesSelector,
	uiSelector,
} from './selectors';
import { restoreLocalStorage } from './utils';

const dataSlice = createSlice<
	IDataSlice,
	IDataSliceReducers,
	IDataSliceName,
	IDataSliceSelectors
>({
	name: DATA_SLICE_NAME,
	initialState: restoreLocalStorage(),
	reducers: {
		createQuestion: createQuestionReducer,
		editQuestion: editQuestionReducer,
		setQuestionToDelete: setQuestionToDeleteReducer,
		setQuestionToEdit: setQuestionToEditReducer,
		setThemeToCreateQuestion: setThemeToCreateQuestionReducer,
		deleteQuestion: deleteQuestionReducer,
		studyQuestion: studyQuestionReducer,
		editStudyQuestion: editStudyQuestionReducer,
		readMaterial: readMaterialReducer,
		createTheme: createThemeReducer,
		editTheme: editThemeReducer,
		setThemeToDelete: setThemeToDeleteReducer,
		setThemeToEdit: setThemeToEditReducer,
		deleteTheme: deleteThemeReducer,
		reorderThemes: reorderThemesReducer,
		reorderQuestions: reorderQuestionsReducer,
		setIsCreateThemeActive: setIsCreateThemeActiveReducer,
		setMaterialToDelete: setMaterialToDeleteReducer,
		setMaterialToEdit: setMaterialToEditReducer,
		setThemeToCreateMaterial: setThemeToCreateMaterialReducer,
		reorderMaterials: reorderMaterialsReducer,
		createMaterial: createMaterialReducer,
		editMaterial: editMaterialReducer,
		deleteMaterial: deleteMaterialReducer,
	},
	selectors: {
		getUI: uiSelector,
		getQuestions: questionsSelector,
		getMaterials: materialsSelector,
		getThemes: themesSelector,
		getQuestion: getQuestionSelector,
		getMaterial: getMaterialSelector,
		getQuestionExtended: getQuestionExtendedSelector,
		getTheme: getThemeSelector,
		getThemeExtended: getThemeExtendedSelector,
		getStatistics: getStatisticsSelector,
	},
});

export const {
	createQuestion,
	editQuestion,
	deleteQuestion,
	studyQuestion,
	editStudyQuestion,
	readMaterial,
	setThemeToCreateQuestion,
	createTheme,
	editTheme,
	deleteTheme,
	reorderThemes,
	reorderQuestions,
	setIsCreateThemeActive,
	setQuestionToDelete,
	setQuestionToEdit,
	setThemeToDelete,
	setThemeToEdit,
	setMaterialToDelete,
	setMaterialToEdit,
	setThemeToCreateMaterial,
	reorderMaterials,
	createMaterial,
	editMaterial,
	deleteMaterial,
} = dataSlice.actions;

export const {
	getUI,
	getQuestions,
	getMaterials,
	getThemes,
	getQuestion,
	getMaterial,
	getQuestionExtended,
	getTheme,
	getThemeExtended,
	getStatistics,
} = dataSlice.selectors;

export default dataSlice.reducer;
